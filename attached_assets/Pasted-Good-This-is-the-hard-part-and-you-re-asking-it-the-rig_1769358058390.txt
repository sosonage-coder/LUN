Good. This is the **hard part** and youâ€™re asking it the right way.

Below is the **exact UX flow** for when a **split is required** â€” written so a **product designer, accountant, and Replit engineer** all understand the same thing.

No theory. No hand-waving.

---

# ðŸ§© UX FLOW â€” WHEN A SPLIT IS REQUIRED

This flow triggers **only** when:

> A single GL balance feeds a financial statement line, but the **note requires a different breakdown** that does **not exist in the trial balance**.

Example:

* GL Accruals = $2,000,000
* Note requires: Payroll / Legal / Professional Fees / Other

---

## 0ï¸âƒ£ Where the User Encounters the Problem (Trigger)

### Location

**Notes â†’ Line Item Note â†’ Table View**

### Visual Cue

* Total matches FS
* Sub-rows are empty or missing

```
Accrued Liabilities
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Payroll                 â€”
Legal                   â€”
Professional Fees       â€”
Other                   â€”
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Total Accruals      2,000,000 âœ”
```

âš ï¸ System flag appears:

> â€œThis note requires a breakdown not available from GL.â€

CTA buttons:

* **[Create Split Working Paper]**
* [Learn why]

---

## 1ï¸âƒ£ User Clicks â€œCreate Split Working Paperâ€

This **does not modify the trial balance**.

### What Opens

âž¡ï¸ **Split Workspace (Modal or Full Page)**

---

## 2ï¸âƒ£ Split Workspace â€” Layout (Critical)

### Header (Locked)

```
SOURCE
Financial Statement Line: Accrued Liabilities
GL Accounts Included:
â€¢ 2100 â€“ Accrued Expenses
â€¢ 2105 â€“ Payroll Accrual
Total Source Balance: 2,000,000
```

ðŸ”’ These amounts are **read-only**

---

### Main Body â€” Split Table

This table behaves like **Excel, but with rules**.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Split Category        â”‚ Source Type   â”‚ Amount        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Payroll               â”‚ GL-linked     â”‚ 1,200,000     â”‚
â”‚ Legal                 â”‚ Manual        â”‚   300,000     â”‚
â”‚ Professional Fees     â”‚ Manual        â”‚   400,000     â”‚
â”‚ Other                 â”‚ Manual        â”‚   100,000     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ TOTAL                 â”‚               â”‚ 2,000,000 âœ”   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Column Behavior

| Column         | Behavior                     |
| -------------- | ---------------------------- |
| Split Category | Editable text                |
| Source Type    | Dropdown: GL-linked / Manual |
| Amount         | Numeric, enforced            |

---

## 3ï¸âƒ£ GL-Linked Rows (Optional Automation)

If user selects **GL-linked**:

* System shows selectable GL accounts
* Amount auto-populates
* Locked after selection

```
Payroll â†’ Linked to:
â˜‘ 2105 â€“ Payroll Accrual (1,200,000)
```

This is how users get **maximum automation** *if they prepared the TB properly*.

---

## 4ï¸âƒ£ Manual Rows (Explicit Responsibility)

Manual rows require:

* Amount input
* Mandatory explanation
* Optional support attachment

When cursor leaves amount field:

âš ï¸ Validation appears if totals donâ€™t match.

---

## 5ï¸âƒ£ Real-Time Validation (Non-Negotiable)

At all times:

* Sum of splits must equal source balance
* No save allowed if mismatch
* No negative numbers unless allowed by note type

Error state:

> âŒ Split total is short by 50,000

---

## 6ï¸âƒ£ Save & Lock Behavior

User clicks **[Save Split]**

System creates:

* A **Split Working Paper Object**
* Version 1.0
* Linked to:

  * Note
  * FS line
  * GL accounts

Split status:

* Draft â†’ Reviewed â†’ Locked

Once locked:

* Amounts cannot change
* Narrative still editable

---

## 7ï¸âƒ£ How the Note Updates (Instant Feedback)

User returns to the note.

Table now renders:

```
Accrued Liabilities
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Payroll             1,200,000
Legal                 300,000
Professional Fees     400,000
Other                 100,000
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Total               2,000,000 âœ”
```

ðŸ”— Each row shows a **link icon**:

* Hover: â€œView Split Working Paperâ€

---

## 8ï¸âƒ£ Visual Cross-References (Key UX Win)

From the note:

* Click row â†’ opens split
* Click total â†’ FS line highlight
* Hover icon shows:

  * Source GL
  * Last updated
  * Owner

From the split:

* Breadcrumbs:

  ```
  FS â†’ Accrued Liabilities â†’ Note â†’ Split
  ```

---

## 9ï¸âƒ£ Reviewer UX

Reviewer sees:

* Source balance
* Breakdown
* Explanation
* Attachments

Buttons:

* Approve
* Request Change (comment required)

No editing numbers.

---

## ðŸ”Ÿ Audit UX (Read-Only)

Auditor can:

* See split logic
* Trace to GL
* Download support
* Confirm totals

Cannot:

* Edit
* Override
* Create splits

---

## ðŸ§  Why This UX Works

* No silent allocations
* No hidden proportions
* No magical automation
* Explicit accountability
* Matches how senior accountants actually work

---

## Optional Rule (Strongly Recommended)

> If users want **zero manual splits**, they must **split the GL upstream**.

Your product **supports truth**, it doesnâ€™t invent it.

---

## Next Logical Step

I can next:

1. Define **data model for Split Working Papers**
2. Show **aging-style split UX**
3. Map **which note types allow splits**
4. Design **print & disclosure rendering logic**

If this were my product, Iâ€™d do **#2 (aging UX)** next.
